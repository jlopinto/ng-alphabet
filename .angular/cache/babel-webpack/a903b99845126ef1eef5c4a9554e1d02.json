{"ast":null,"code":"import { transition, trigger, useAnimation } from '@angular/animations';\nimport { fade, fadeModals } from 'src/app/animations.module';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/letter-store.service\";\nimport * as i2 from \"src/app/services/game.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../sun/sun.component\";\nimport * as i6 from \"../letter/letter.component\";\nimport * as i7 from \"../start-menu/start-menu.component\";\nimport * as i8 from \"../configuration-view/configuration-view.component\";\nimport * as i9 from \"../result-menu/result-menu.component\";\nimport * as i10 from \"../pause-menu/pause-menu.component\";\n\nfunction SceneComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵelementStart(1, \"div\", 22);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" / \");\n    i0.ɵɵelementStart(5, \"div\", 23);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"@autoFade\", undefined);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 3, ctx_r0.store.foundLetters$).length);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.store.letters.length);\n  }\n}\n\nfunction SceneComponent_app_letter_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-letter\", 24);\n  }\n\n  if (rf & 2) {\n    const letter_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"letter\", letter_r7);\n  }\n}\n\nfunction SceneComponent_app_start_menu_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-start-menu\", 25);\n    i0.ɵɵlistener(\"toggleConfMenu\", function SceneComponent_app_start_menu_22_Template_app_start_menu_toggleConfMenu_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.toggleConfMenu($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"@fadeModals\", undefined);\n  }\n}\n\nfunction SceneComponent_app_configuration_view_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-configuration-view\", 25);\n    i0.ɵɵlistener(\"toggleConfMenu\", function SceneComponent_app_configuration_view_23_Template_app_configuration_view_toggleConfMenu_0_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.toggleConfMenu($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"@fadeModals\", undefined);\n  }\n}\n\nfunction SceneComponent_app_result_menu_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-result-menu\", 26);\n    i0.ɵɵlistener(\"toggleConfMenu\", function SceneComponent_app_result_menu_24_Template_app_result_menu_toggleConfMenu_0_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.toggleConfMenu($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"@fadeModals\", undefined)(\"result\", ctx_r4.game.runResult);\n  }\n}\n\nfunction SceneComponent_app_pause_menu_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-pause-menu\", 27);\n  }\n}\n\nfunction SceneComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 28);\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"@autoFadeBackdrop\", undefined);\n  }\n}\n\nexport let SceneComponent = /*#__PURE__*/(() => {\n  class SceneComponent {\n    constructor(store, game, route) {\n      this.store = store;\n      this.game = game;\n      this.route = route;\n      this.showConfigMenu = false;\n\n      this.trackByFn = (_i, item) => item.id;\n\n      this.showConfigMenu = false;\n    }\n\n    handleKeyboardEvent(event) {\n      if (this.game.started) {\n        switch (event.keyCode) {\n          case 27:\n            event.preventDefault();\n            this.game.end('stop');\n            break;\n\n          default:\n            break;\n        }\n      } else {\n        switch (event.keyCode) {\n          case 32:\n            event.preventDefault();\n\n            if (!this.showConfigMenu) {\n              this.game.start();\n            }\n\n            break;\n\n          default:\n            break;\n        }\n      }\n    }\n\n    handleClickEvent(event) {\n      if (this.game.started && event.tapCount === 2) {\n        event.preventDefault();\n        this.game.end();\n        return false;\n      }\n    }\n\n    ngOnInit() {\n      this.sub = this.route.paramMap.subscribe(params => {\n        let paramChallenge = params.get('challenge');\n\n        if (paramChallenge && paramChallenge !== this.game.challenge) {\n          this.store.setChallenge(paramChallenge.substr(0, 48));\n          this.game.saveLocalPrefs();\n        } else {\n          this.store.setChallenge(this.game.challenge);\n        }\n\n        this.store.init(this.game);\n      });\n    }\n\n    ngOnDestroy() {\n      this.sub.unsubscribe();\n    }\n\n    toggleConfMenu(event) {\n      this.showConfigMenu = event;\n    }\n\n  }\n\n  SceneComponent.ɵfac = function SceneComponent_Factory(t) {\n    return new (t || SceneComponent)(i0.ɵɵdirectiveInject(i1.LettersStoreService), i0.ɵɵdirectiveInject(i2.GameService), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n  };\n\n  SceneComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SceneComponent,\n    selectors: [[\"app-scene\"]],\n    hostVars: 2,\n    hostBindings: function SceneComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"keydown\", function SceneComponent_keydown_HostBindingHandler($event) {\n          return ctx.handleKeyboardEvent($event);\n        }, false, i0.ɵɵresolveDocument)(\"tap\", function SceneComponent_tap_HostBindingHandler($event) {\n          return ctx.handleClickEvent($event);\n        });\n      }\n\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"modal-open\", ctx.showConfigMenu);\n      }\n    },\n    decls: 27,\n    vars: 10,\n    consts: [[2, \"display\", \"none\"], [\"xmlns\", \"http://www.w3.org/2000/svg\"], [\"id\", \"star\", \"viewBox\", \"0 0 535 512\"], [\"fill\", \"currentColor\", \"d\", \"M238.8 17.8l-65.3 132.4-146.1 21.3c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7l130.7-68.7 130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6l-146.1-21.3-65.3-132.4c-11.7-23.6-45.6-23.9-57.4 0z\"], [\"id\", \"balloon\", \"viewBox\", \"0 0 97.4 160.2\"], [\"fill\", \"currentColor\", \"d\", \"M56.7 160.2H41.4c-1.7 0-3.1-1.2-3.1-2.7l-3-19.2c0-1.5 1.4-2.7 3.1-2.7h21.4c1.7 0 3.1 1.2 3.1 2.7l-3.1 19.2c-.1 1.5-1.4 2.7-3.1 2.7z\", 1, \"balloon-1\"], [\"fill\", \"currentColor\", \"d\", \"M70.8 5.2c-1-.5-1.9.7-1.2 1.6 8.2 8.7 15.6 22.9 15.6 39.9 0 21.5-9.2 41.9-22.3 63.4-.6 1 .8 2.1 1.6 1.2 18.8-21.8 33-42.2 33-63.8-.1-19.3-12.1-34.7-26.7-42.3z\", 1, \"balloon-2\"], [\"fill\", \"currentColor\", \"d\", \"M12.3 46.6c0-17 7.2-31.1 15.4-39.7.8-.8-.2-2.1-1.2-1.6C11.8 12.9 0 28.1 0 47.4c0 24.2 15.2 43 33.6 63.7.8.9 2.2-.2 1.6-1.2-12.8-20.3-23-39.3-22.9-63.3z\", 1, \"balloon-3\"], [\"fill\", \"currentColor\", \"d\", \"M48.8 0c-15.4 0-27.9 18.8-28 47.4S33 97.1 45.9 122.5c2.9 5 3.3 5 5.6 0 13.2-26 25-49.8 25-75.1C76.6 18.8 64.2 0 48.8 0z\", 1, \"balloon-4\"], [\"preserveAspectRatio\", \"xMidYMid meet\", \"id\", \"beach-wave\", \"viewBox\", \"0 0 1440 320\"], [\"fill\", \"#f0df89\", \"fill\", \"red\", \"d\", \"M0,128L80,117.3C160,107,320,85,480,96C640,107,800,149,960,160C1120,171,1280,149,1360,138.7L1440,128L1440,320L1360,320C1280,320,1120,320,960,320C800,320,640,320,480,320C320,320,160,320,80,320L0,320Z\"], [1, \"board\"], [\"class\", \"scoreboard\", 4, \"ngIf\"], [1, \"sky\"], [3, \"letter\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"sea\"], [1, \"sea__line\"], [\"class\", \"modal show\", 3, \"toggleConfMenu\", 4, \"ngIf\"], [\"class\", \"modal show\", 3, \"result\", \"toggleConfMenu\", 4, \"ngIf\"], [\"class\", \"modal show\", 4, \"ngIf\"], [\"class\", \"modal-backdrop show\", 4, \"ngIf\"], [1, \"scoreboard\"], [1, \"scoreboard__score\"], [1, \"scoreboard__goal\"], [3, \"letter\"], [1, \"modal\", \"show\", 3, \"toggleConfMenu\"], [1, \"modal\", \"show\", 3, \"result\", \"toggleConfMenu\"], [1, \"modal\", \"show\"], [1, \"modal-backdrop\", \"show\"]],\n    template: function SceneComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(1, \"svg\", 1);\n        i0.ɵɵelementStart(2, \"symbol\", 2);\n        i0.ɵɵelement(3, \"path\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"symbol\", 4);\n        i0.ɵɵelement(5, \"path\", 5);\n        i0.ɵɵelement(6, \"path\", 6);\n        i0.ɵɵelement(7, \"path\", 7);\n        i0.ɵɵelement(8, \"path\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"symbol\", 9);\n        i0.ɵɵelement(10, \"path\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"symbol\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(12, \"div\", 11);\n        i0.ɵɵtemplate(13, SceneComponent_div_13_Template, 7, 5, \"div\", 12);\n        i0.ɵɵelementStart(14, \"div\", 13);\n        i0.ɵɵelement(15, \"app-sun\");\n        i0.ɵɵtemplate(16, SceneComponent_app_letter_16_Template, 1, 1, \"app-letter\", 14);\n        i0.ɵɵpipe(17, \"async\");\n        i0.ɵɵelementStart(18, \"div\", 15);\n        i0.ɵɵelement(19, \"div\", 16);\n        i0.ɵɵelement(20, \"div\", 16);\n        i0.ɵɵelement(21, \"div\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(22, SceneComponent_app_start_menu_22_Template, 1, 1, \"app-start-menu\", 17);\n        i0.ɵɵtemplate(23, SceneComponent_app_configuration_view_23_Template, 1, 1, \"app-configuration-view\", 17);\n        i0.ɵɵtemplate(24, SceneComponent_app_result_menu_24_Template, 1, 2, \"app-result-menu\", 18);\n        i0.ɵɵtemplate(25, SceneComponent_app_pause_menu_25_Template, 1, 0, \"app-pause-menu\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(26, SceneComponent_div_26_Template, 1, 1, \"div\", 20);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngIf\", ctx.game.started);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(17, 8, ctx.store.animatedLetters$))(\"ngForTrackBy\", ctx.trackByFn);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", !ctx.game.started && !ctx.game.ended && !ctx.showConfigMenu);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showConfigMenu);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.game.ended && !ctx.showConfigMenu);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.game.started && ctx.game.paused);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.game.started && !ctx.game.ended || ctx.game.ended);\n      }\n    },\n    directives: [i4.NgIf, i5.SunComponent, i4.NgForOf, i6.LetterComponent, i7.StartMenuComponent, i8.ConfigurationViewComponent, i9.ResultMenuComponent, i10.PauseMenuComponent],\n    pipes: [i4.AsyncPipe],\n    styles: [\".scoreboard[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;transform:translate(-50%);z-index:100;display:flex;justify-content:center;background-color:#fff;border-radius:0 0 1rem 1rem;font-size:2rem;padding:0 .5rem .5rem}\"],\n    data: {\n      animation: [trigger('fadeModals', [transition(':enter', useAnimation(fadeModals, {\n        params: {\n          opacityStart: 0,\n          opacityEnd: 1,\n          translateYStart: '-100px',\n          translateYEnd: '0'\n        }\n      })), transition(':leave', useAnimation(fadeModals, {\n        params: {\n          animSpeed: '.2s',\n          opacityStart: 1,\n          opacityEnd: 0,\n          translateYStart: '0',\n          translateYEnd: '-100px'\n        }\n      }))]), trigger('autoFadeBackdrop', [transition(':enter', useAnimation(fadeModals, {\n        params: {\n          opacityStart: 0,\n          opacityEnd: '.5'\n        }\n      })), transition(':leave', useAnimation(fadeModals, {\n        params: {\n          animSpeed: '.2s',\n          opacityStart: '.5',\n          opacityEnd: 0\n        }\n      }))]), trigger('autoFade', [transition(':enter', useAnimation(fade, {\n        params: {\n          opacityStart: 0,\n          opacityEnd: '.5'\n        }\n      })), transition(':leave', useAnimation(fade, {\n        params: {\n          animSpeed: '.2s',\n          opacityStart: '.5',\n          opacityEnd: 0\n        }\n      }))])]\n    }\n  });\n  return SceneComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}